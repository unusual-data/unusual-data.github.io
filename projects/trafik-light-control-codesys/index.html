<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr" xml:lang="tr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="İbrahim Çapar">
<meta name="description" content="Kavşak senaryoları için ST dili ve FSM mimarisi kullanılarak geliştirilen, Codesys Visu entegreli kontrol sistemi.">

<title>CODESYS Tabanlı Trafik Işığı Kontrol Sistemi – İbrahim ÇAPAR</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-fc8d3d93f0a84b7619e1f8ff6eb63d42.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-a39eee177a8c87582d4ccc42e2201d1d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/videojs/video.min.js"></script>
<link href="../../site_libs/quarto-contrib/videojs/video-js.css" rel="stylesheet">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sonuç yok",
    "search-matching-documents-text": "eşleşen belgeler",
    "search-copy-link-title": "Aramak için bağlantıyı kopyalayın",
    "search-hide-matches-text": "Ek eşleşmeleri gizle",
    "search-more-match-text": "bu belgede bir tane daha eşleşme",
    "search-more-matches-text": "bu belgede daha fazla eşleşme",
    "search-clear-button-title": "Temizle",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "İptal et",
    "search-submit-button-title": "Gönder",
    "search-label": "Ara"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SRL55MJHF7"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-SRL55MJHF7', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
<link rel="stylesheet" href="../../lightbox-style.css">
<meta property="og:title" content="CODESYS Tabanlı Trafik Işığı Kontrol Sistemi – İbrahim ÇAPAR">
<meta property="og:description" content="Kavşak senaryoları için ST dili ve FSM mimarisi kullanılarak geliştirilen, Codesys Visu entegreli kontrol sistemi.">
<meta property="og:image" content="https://ibrahimcapar.com/projects/trafik-light-control-codesys/images/codesys-traffic-lights.jpg">
<meta property="og:site_name" content="İbrahim ÇAPAR">
<meta name="twitter:title" content="CODESYS Tabanlı Trafik Işığı Kontrol Sistemi – İbrahim ÇAPAR">
<meta name="twitter:description" content="Kavşak senaryoları için ST dili ve FSM mimarisi kullanılarak geliştirilen, Codesys Visu entegreli kontrol sistemi.">
<meta name="twitter:image" content="https://ibrahimcapar.com/projects/trafik-light-control-codesys/images/codesys-traffic-lights.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">İbrahim ÇAPAR</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Ara"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Gezinmeyi değiştir" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/index.html"> 
<span class="menu-text">Projelerim</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notes/technical/index.html"> 
<span class="menu-text">Teknik Referanslar</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notes/learning/index.html"> 
<span class="menu-text">Öğrenme Günlüğü</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/ibrahimcapar1" target="_blank"> <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:ibrahimcaparr1@gmail.com"> <i class="bi bi-envelope-fill" role="img" aria-label="Email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Bu sayfada</h2>
   
  <ul>
  <li><a href="#proje-künyesi" id="toc-proje-künyesi" class="nav-link active" data-scroll-target="#proje-künyesi">1. Proje Künyesi</a></li>
  <li><a href="#genel-bakış-ve-problem-tanımı" id="toc-genel-bakış-ve-problem-tanımı" class="nav-link" data-scroll-target="#genel-bakış-ve-problem-tanımı">2. Genel Bakış ve Problem Tanımı</a>
  <ul class="collapse">
  <li><a href="#proje-amacı" id="toc-proje-amacı" class="nav-link" data-scroll-target="#proje-amacı">Proje Amacı</a></li>
  <li><a href="#problem" id="toc-problem" class="nav-link" data-scroll-target="#problem">Problem</a></li>
  <li><a href="#çözüm-ve-yaklaşım" id="toc-çözüm-ve-yaklaşım" class="nav-link" data-scroll-target="#çözüm-ve-yaklaşım">Çözüm ve Yaklaşım</a></li>
  </ul></li>
  <li><a href="#sistem-mimarisi-ve-tasarım" id="toc-sistem-mimarisi-ve-tasarım" class="nav-link" data-scroll-target="#sistem-mimarisi-ve-tasarım">3. Sistem Mimarisi ve Tasarım</a>
  <ul class="collapse">
  <li><a href="#algoritma-ve-işleyiş-mantığı" id="toc-algoritma-ve-işleyiş-mantığı" class="nav-link" data-scroll-target="#algoritma-ve-işleyiş-mantığı">3.1. Algoritma ve İşleyiş Mantığı</a></li>
  <li><a href="#teknik-yaklaşım" id="toc-teknik-yaklaşım" class="nav-link" data-scroll-target="#teknik-yaklaşım">3.2. Teknik Yaklaşım</a></li>
  </ul></li>
  <li><a href="#uygulama-ve-kod-detayları" id="toc-uygulama-ve-kod-detayları" class="nav-link" data-scroll-target="#uygulama-ve-kod-detayları">4. Uygulama ve Kod Detayları</a>
  <ul class="collapse">
  <li><a href="#değişken-ve-tanımlar" id="toc-değişken-ve-tanımlar" class="nav-link" data-scroll-target="#değişken-ve-tanımlar">4. 1. Değişken ve Tanımlar</a></li>
  <li><a href="#algoritma-ve-kod-mantığı" id="toc-algoritma-ve-kod-mantığı" class="nav-link" data-scroll-target="#algoritma-ve-kod-mantığı">4. 2. Algoritma ve Kod Mantığı</a></li>
  </ul></li>
  <li><a href="#karşılaşılan-teknik-zorluklar-ve-çözüm-süreçleri" id="toc-karşılaşılan-teknik-zorluklar-ve-çözüm-süreçleri" class="nav-link" data-scroll-target="#karşılaşılan-teknik-zorluklar-ve-çözüm-süreçleri">5. Karşılaşılan Teknik Zorluklar ve Çözüm Süreçleri</a>
  <ul class="collapse">
  <li><a href="#görsel-bileşenlerin-hizalanması" id="toc-görsel-bileşenlerin-hizalanması" class="nav-link" data-scroll-target="#görsel-bileşenlerin-hizalanması">5.1. Görsel Bileşenlerin Hizalanması</a></li>
  <li><a href="#durum-verilerinin-anlık-gösterimi" id="toc-durum-verilerinin-anlık-gösterimi" class="nav-link" data-scroll-target="#durum-verilerinin-anlık-gösterimi">5.2. Durum Verilerinin Anlık Gösterimi</a></li>
  </ul></li>
  <li><a href="#sonuç-ve-gelecek-geliştirmeler" id="toc-sonuç-ve-gelecek-geliştirmeler" class="nav-link" data-scroll-target="#sonuç-ve-gelecek-geliştirmeler">6. Sonuç ve Gelecek Geliştirmeler</a></li>
  <li><a href="#referanslar-ve-kaynakça" id="toc-referanslar-ve-kaynakça" class="nav-link" data-scroll-target="#referanslar-ve-kaynakça">7. Referanslar ve Kaynakça</a></li>
  <li><a href="#sonuç" id="toc-sonuç" class="nav-link" data-scroll-target="#sonuç">Sonuç</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CODESYS Tabanlı Trafik Işığı Kontrol Sistemi</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Endüstriyel Otomasyon</div>
    <div class="quarto-category">PLC</div>
    <div class="quarto-category">CODESYS</div>
    <div class="quarto-category">Visu</div>
    <div class="quarto-category">ST</div>
  </div>
  </div>

<div>
  <div class="description">
    Kavşak senaryoları için ST dili ve FSM mimarisi kullanılarak geliştirilen, Codesys Visu entegreli kontrol sistemi.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Yazar</div>
    <div class="quarto-title-meta-contents">
             <p>İbrahim Çapar </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Yayınlanma Tarihi</div>
    <div class="quarto-title-meta-contents">
      <p class="date">19 Aralık 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Değiştirilme Tarihi</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">20 Aralık 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="proje-künyesi" class="level2">
<h2 class="anchored" data-anchor-id="proje-künyesi">1. Proje Künyesi</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 72%">
</colgroup>
<thead>
<tr class="header">
<th>Kategori</th>
<th>Detay</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Disiplin / Alan</td>
<td>Endüstriyel Otomasyon</td>
</tr>
<tr class="even">
<td>Mimari &amp; Metodoloji</td>
<td>FSM (Sonlu Durum Makinesi)</td>
</tr>
<tr class="odd">
<td>Teknolojiler</td>
<td>CODESYS V3.5, Structured Text (ST),TargetVisu</td>
</tr>
<tr class="even">
<td>Uygulama Odağı</td>
<td>Akıllı Kavşak Yönetimi</td>
</tr>
<tr class="odd">
<td>Kaynak</td>
<td>[Kodları İncele (#kod-bolumu)] - [Dosyayı İndir]</td>
</tr>
</tbody>
</table>
<div id="fig-simulasyon" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-simulasyon-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-video"><video id="video_shortcode_videojs_video1" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title="Sistem Simülasyonu"><source src="videos/traffic_lights.mp4"></video></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-simulasyon-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Şekil&nbsp;1: Sistemin tam döngü (full-cycle) çalışma simülasyonu.
</figcaption>
</figure>
</div>
</section>
<section id="genel-bakış-ve-problem-tanımı" class="level2">
<h2 class="anchored" data-anchor-id="genel-bakış-ve-problem-tanımı">2. Genel Bakış ve Problem Tanımı</h2>
<section id="proje-amacı" class="level3">
<h3 class="anchored" data-anchor-id="proje-amacı">Proje Amacı</h3>
<p>Bu projenin amacı yapılandırılmış metin (Structured Text - ST) kullanarak sonlu durum makinesi (Finite State Machine - FSM) yaklaşımıyla bir kavşaktaki trafik ışığı sisteminin simülasyonunun gerçekleştirilmesidir.</p>
</section>
<section id="problem" class="level3">
<h3 class="anchored" data-anchor-id="problem">Problem</h3>
<p>Karmaşık kontrol senaryolarında, geleneksel “Ladder Logic” veya basit zamanlayıcı (Timer) zincirleri kullanmak, sistem büyüdükçe şu sorunlara yol açmaktadır:</p>
<ol type="1">
<li><strong>Yönetilebilirlik:</strong> Sisteme ait durumlar (örn: başlangıç, gündüz, gece , acil vb.) arttıkça kodun okunabilirliği azalmaktadır.</li>
<li><strong>Senkronizasyon:</strong> Zamanlayıcıların asenkron çalışması sonucu işlevlerin çakışma riski (örn: aynı anda iki yeşil ışık yanması) bulunmaktadır.</li>
<li><strong>Esneklik:</strong> Yeni bir kural eklendiğinde tüm kodun baştan yazılması gerekebilmektedir.</li>
</ol>
</section>
<section id="çözüm-ve-yaklaşım" class="level3">
<h3 class="anchored" data-anchor-id="çözüm-ve-yaklaşım">Çözüm ve Yaklaşım</h3>
<p>Belirtilen problemleri aşmak adına bu sistem ST programlama ile <strong>FSM</strong> mimarisi kullanılılarak yapılmıştır.</p>
<ul>
<li><p>Her trafik durumu (Kırmızı, Sarı, Yeşil) izole bir <code>CASE</code> adımı olarak tanımlanmıştır.</p></li>
<li><p>Geçişler, katı mantıksal koşullara (Transition Conditions) bağlanarak hata riski minimize edilmiştir.</p></li>
<li><p>Görselleştirme katmanı (Visualization/TargetVisu), kontrolcüden bağımsız çalışacak şekilde optimize edilmiştir.</p></li>
</ul>
</section>
</section>
<section id="sistem-mimarisi-ve-tasarım" class="level2">
<h2 class="anchored" data-anchor-id="sistem-mimarisi-ve-tasarım">3. Sistem Mimarisi ve Tasarım</h2>
<p>Projenin teknik altyapısı, sistemin kararlılığını ve genişletilebilirliğini garanti altına alacak şekilde kurgulanmıştır. Sistem CODESYS ortamında hazırlanan PLC programı ile bu projeye eklenen “Visualization” objesiyle etkileşim kurmaktadır. Sistemin görsel olarak izlenebilmesi için yol ve ışık objeleri, başlatma-durdurma ve gece modu butonları oluşturulmuştur. Trafik ışıkları bulunduğu yön ve renk bilgisiyle tanımlanmıştır.</p>
<section id="algoritma-ve-işleyiş-mantığı" class="level3">
<h3 class="anchored" data-anchor-id="algoritma-ve-işleyiş-mantığı">3.1. Algoritma ve İşleyiş Mantığı</h3>
<p>Sistem kontrolü, durum ve geçişlere dayalı <strong>Sonlu Durum Makinesi (FSM)</strong> yapısı ile gerçekleştirilmiştir. Algoritma, karmaşık <code>IF-ELSE</code> blokları yerine, birbirinden izole edilmiş durumlar (states) üzerinden ilerlemektedir:</p>
<ul>
<li><strong>Başlangıç:</strong> Sistemin enerjilendiği, sistem kapanırken değişkenlerin sıfırlandığı ve güvenlik kontrollerinin yapıldığı ana döngü.</li>
<li><strong>Gündüz Modu :</strong> Trafik ışıklarının önceden tanımlı sürelerde (Kırmızı, Sarı, Yeşil) sıralı olarak değiştiği döngü.</li>
<li><strong>Gece Modu :</strong> Belirli bir tetikleyici ile (manuel buton veya saat) devreye giren, tüm sarı ışıkların saniyede iki kez yanım söndüğü döngü.</li>
</ul>
</section>
<section id="teknik-yaklaşım" class="level3">
<h3 class="anchored" data-anchor-id="teknik-yaklaşım">3.2. Teknik Yaklaşım</h3>
<ul>
<li><p>Sistemin programlanmasında dil seçimi olarak ST programlama tercih edilmiştir. Ladder diyagramı görsel olarak takip edilebilen bir yapıda olsa da durum yönetiminde yetersiz kalabilmektedir. Bu projede, kodun okunabilirliğini arttırmak hata ve durum yönetimini daha kolaylaştırmıştır.</p></li>
<li><p>Sıralı akış yerine durum tabanlı yaklaşım seçilmesinin temel nedeni <strong>genişletilebilirliktir</strong>. İleride sisteme “Yaya Butonu” veya “Acil Durum Modu” gibi eklemeler yapılması gerektiğinde, mevcut kod yapısını bozmadan sadece yeni bir <code>STATE</code> bloğu entegre edilmesi yeterli olacaktır.</p></li>
</ul>
</section>
</section>
<section id="uygulama-ve-kod-detayları" class="level2">
<h2 class="anchored" data-anchor-id="uygulama-ve-kod-detayları">4. Uygulama ve Kod Detayları</h2>
<p>Sistemin yazılım altyapısı; sürdürülebilirlik, modülerlik ve standartlara uygunluk gözetilerek geliştirilmiştir. Aşağıda, projenin temelini oluşturan veri yapıları ve işleyen kod mantığı teknik detaylarıyla sunulmuştur.</p>
<section id="değişken-ve-tanımlar" class="level3">
<h3 class="anchored" data-anchor-id="değişken-ve-tanımlar">4. 1. Değişken ve Tanımlar</h3>
<p>Sistemde kullanılan değişkenler ve veri tipleri, <strong>IEC 61131-3</strong> standartlarına uygun olarak tanımlanmış ve kullanım amaçlarına göre sınıflandırılmıştır.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Veri Tanımlamalarını İncele">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Not</span>Veri Tanımlamalarını İncele
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<pre class="st"><code>PROGRAM PLC_PRG
VAR
    (* --- Sistem Durum Yönetimi --- *)
    xStart      : BOOL := FALSE;  // Sistemin aktiflik durumu
    xNightMode  : BOOL := FALSE;  // Operasyonel mod seçimi
    
    (* --- FSM Durum İndeksleri --- *)
    xStep       : INT := 0;       // Mevcut durum adımı
    tDuration   : TIME;           // Dinamik zamanlayıcı değeri
    
    (* --- Çıkış Birimleri --- *)
    xKuzeyGuneyYesil    : BOOL;
    xKuzeyGuneyKirmizi  : BOOL; 
    // ... (Diğer tanımlar kısaltılmıştır)

    (* --- Fonksiyon Blokları --- *)
    fbStepTimer         : TON;    // Ana döngü zamanlayıcısı
    fbBlinkTimer        : TON;    // Sinyal üreteci      
END_VAR</code></pre>
</div>
</div>
</div>
</section>
<section id="algoritma-ve-kod-mantığı" class="level3">
<h3 class="anchored" data-anchor-id="algoritma-ve-kod-mantığı">4. 2. Algoritma ve Kod Mantığı</h3>
<p>Projenin karar mekanizması, Sonlu Durum Makinesi (FSM) mimarisi üzerine kurgulanmıştır. Bu yapı, her senaryonun birbirinden izole şekilde işletilmesini ve kodun kontrollü akışını sağlar.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Kod Mantığını İncele">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Not</span>Kod Mantığını İncele
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<pre class="st"><code>(* Zamanlayıcıların Döngüsel Güncellemesi *)
fbStepTimer(IN := (xStart AND NOT xNightMode AND NOT fbStepTimer.Q), PT:= tDuration);

(* Ana Kontrol Döngüsü *)
IF xStart THEN
    (* Mod Yönetimi: Öncelik Gece Modundadır *)
    IF xNightMode THEN
        // Gece modu algoritması (Kodun bu kısmı özetlenmiştir...)
    ELSE
        (* Gündüz Modu - Durum Makinesi Akışı *)
        CASE xStep OF
            10: (* DURUM: K-G Yeşil, D-B Kırmızı *)
                xKuzeyGuneyYesil := TRUE; 
                xDoguBatiKirmizi := TRUE;
                tDuration := T#5S; 
                
                // Durum Geçiş Koşulu
                IF fbStepTimer.Q THEN xStep := 20; END_IF;
    
            20: (* DURUM: K-G Sarı, D-B Kırmızı *)
                xKuzeyGuneyYesil := FALSE; 
                xKuzeyGuneySari := TRUE;
                tDuration := T#2S; 
                
                IF fbStepTimer.Q THEN xStep := 30; END_IF;         
                 
            // ... (Akış diğer durumlar ile devam eder) ...
        END_CASE
    END_IF;
ELSE
    (* Reset / Güvenli Durum *)
    xStep := 0;
    xKuzeyGuneyYesil := FALSE; 
    // Sistem kapatıldığında tüm çıkışlar güvenli konuma çekilir.
END_IF;</code></pre>
</div>
</div>
</div>
</section>
</section>
<section id="karşılaşılan-teknik-zorluklar-ve-çözüm-süreçleri" class="level2">
<h2 class="anchored" data-anchor-id="karşılaşılan-teknik-zorluklar-ve-çözüm-süreçleri">5. Karşılaşılan Teknik Zorluklar ve Çözüm Süreçleri</h2>
<p>Proje geliştirme aşamasında karşılaşılan teknik kısıtlar ve bu kısıtları aşmak için uygulanan mühendislik çözümleri aşağıda detaylandırılmıştır.</p>
<section id="görsel-bileşenlerin-hizalanması" class="level3">
<h3 class="anchored" data-anchor-id="görsel-bileşenlerin-hizalanması">5.1. Görsel Bileşenlerin Hizalanması</h3>
<p><strong>Problem:</strong> Eklenen bileşenlerin görsel şemaya uygun bir şekilde birbirleriyle simetrik ve estetik bir görünümde olması gerekiyordu.</p>
<p><strong>Çözüm:</strong> Bileşenler sınırlı bir alan içerisine rounded-rectangle içerisine çizildi. Böylece “Visualization” ekranında bileşenlerin birbirine ve içerisinde bulunduğu sınır bölgeye göre yatay ve dikey hizalamalar gerçekleştirildi. Daha sonra eklenen “rounded-rectangle” bileşeni görünmez yapıldı.</p>
<div class="centered-captions quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images\codesys-1.png" class="lightbox" data-gallery="ana-grup" title="Görsel 1"><img src="images\codesys-1.png" class="img-fluid figure-img" alt="Görsel 1"></a></p>
<figcaption>Görsel 1</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images\codesys-2.png" class="lightbox" data-gallery="ana-grup" title="Görsel 2"><img src="images\codesys-2.png" class="img-fluid figure-img" alt="Görsel 2"></a></p>
<figcaption>Görsel 2</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="durum-verilerinin-anlık-gösterimi" class="level3">
<h3 class="anchored" data-anchor-id="durum-verilerinin-anlık-gösterimi">5.2. Durum Verilerinin Anlık Gösterimi</h3>
<p><strong>Problem:</strong> Simülasyon ekranında o anki trafik durumunu (Örn: “Kuzey-Güney Yeşil”) göstermek için güzergaha göre trafik ışığının ne renk olduğu ekranda gösterilmesi gerekiyordu.<br>
</p>
<p><strong>Çözüm:</strong> <code>STRING</code> manipülasyonu yerine, CODESYS <strong>Text List</strong> özelliği kullanıldı. Durum değişkeni (<code>xStep</code>) doğrudan bir ID olarak listeye bağlandı ve sadece ilgili durumun metni dinamik olarak çağrıldı. Bu yöntemle bellek kullanımı optimize edildi.</p>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/codesys-statev1.png" class="lightbox" data-gallery="state" title="States V1"><img src="images/codesys-statev1.png" class="img-fluid figure-img" alt="States V1"></a></p>
<figcaption>States V1</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/codesys-statev2.png" class="lightbox" data-gallery="state" title="States V1"><img src="images/codesys-statev2.png" class="img-fluid figure-img" alt="States V1"></a></p>
<figcaption>States V1</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/codesys-statev1-dynamics-text.png" class="lightbox" data-gallery="state" title="Dynamics Text V1"><img src="images/codesys-statev1-dynamics-text.png" class="img-fluid figure-img" alt="Dynamics Text V1"></a></p>
<figcaption>Dynamics Text V1</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/codesys-statev2-dynamics-text.png" class="lightbox" data-gallery="state" title="Dynamics Text V2"><img src="images/codesys-statev2-dynamics-text.png" class="img-fluid figure-img" alt="Dynamics Text V2"></a></p>
<figcaption>Dynamics Text V2</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="sonuç-ve-gelecek-geliştirmeler" class="level2">
<h2 class="anchored" data-anchor-id="sonuç-ve-gelecek-geliştirmeler">6. Sonuç ve Gelecek Geliştirmeler</h2>
<p>Bu proje kapsamında, endüstriyel otomasyon süreçlerinde kritik öneme sahip olan trafik kontrol algoritması, <strong>IEC 61131-3</strong> standartlarına uygun olarak başarıyla modellenmiştir.</p>
<p><strong>Proje Çıktıları:</strong> * <strong>Deterministik Kontrol:</strong> FSM mimarisi sayesinde, durumlar arası geçişlerdeki belirsizlikler ve çakışma riskleri ortadan kaldırılmıştır. * <strong>Modülerlik:</strong> Kod yapısı, <code>CASE</code> blokları ile izole edilerek bakımı kolay ve genişletilebilir bir formata getirilmiştir. * <strong>Sanal Devreye Alma:</strong> CODESYS TargetVisu kullanılarak, fiziksel donanıma ihtiyaç duyulmadan mantıksal doğrulama (Logic Verification) sağlanmıştır.</p>
<p><strong>Gelecek İçin Yol Haritası:</strong> Projenin bir sonraki fazında, sistemi daha otonom ve veriye dayalı hale getirmek adına şu geliştirmeler planlanmaktadır: 1. <strong>OPC UA Entegrasyonu:</strong> Trafik yoğunluk verilerinin harici bir SCADA veya Python servisine aktarılması. 2. <strong>Adaptif Zamanlama:</strong> Araç yoğunluğuna göre yeşil ışık sürelerini dinamik olarak değiştiren bir sensör katmanının eklenmesi. 3. <strong>Donanım Testi:</strong> Simülasyon ortamında doğrulanan kodun, fiziksel bir PLC (Örn: Raspberry Pi Runtime) üzerinde koşturulması.</p>
</section>
<section id="referanslar-ve-kaynakça" class="level2">
<h2 class="anchored" data-anchor-id="referanslar-ve-kaynakça">7. Referanslar ve Kaynakça</h2>
<p>Proje sürecinde yararlanılan teknik dokümanlar ve araçlar aşağıdadır:</p>
<ul>
<li><strong>GitHub Deposu:</strong> <a href="https://github.com/ibrahimcapar/codesys-traffic-fsm">x/codesys-traffic-fsm</a></li>
<li><strong>Standart:</strong> IEC 61131-3 Programming Industrial Automation Systems</li>
<li><strong>Dokümantasyon:</strong> CODESYS Online Help (V3.5 SP21)</li>
</ul>
</section>
<section id="sonuç" class="level1">
<h1>Sonuç</h1>
<p>Bu proje ile ST programlama kullanarak FSM mantığı pekiştirilmeye çalışılmıştır. Aynı zamanda gerçekleştirilen kod blokları görsel bir sahneye dönüştürülmüş değişkenler ve görsel bileşenler arasında senaryoya uygun ilişkilendirilmeler yapılmıştır.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Kopyalandı");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Kopyalandı");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ibrahimcapar\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<script>videojs(video_shortcode_videojs_video1);</script>
<script>var lightboxQuarto = GLightbox({"closeEffect":"fade","descPosition":"bottom","loop":true,"openEffect":"fade","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>